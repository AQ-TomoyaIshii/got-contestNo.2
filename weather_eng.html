<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>weather</title>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="weather.css">
</head>

<body>
    <div id="header">
        <a href="main_eng.html">
            <div id="top_title"><img src="img/top_title.jpg" alt="top_title"></div>
        </a>
        <div id="lunguage">
            <form action="">
                <select name="language" id="language" onChange="location.href=value;">
                    <option value="weather.html">日本語</option>
                    <option value="weather_eng.html" selected>english</option>
                </select>
            </form>
        </div>
    </div>
    <div id="main_frame">
        <div id="select">
            <form method="get">
                <select name="cityName" id="address">
                    <option value="">select a prefecture</option>
                    <option value="sapporo">Hokkaido</option>
                    <option value="aomori">Aomori</option>
                    <option value="morioka">Iwate</option>
                    <option value="akita">Akita</option>
                    <option value="yamagata">Yamagata</option>
                    <option value="sendai">Miyagi</option>
                    <option value="koriyama">Hukushima</option>
                    <option value="niigata">Nigata</option>
                    <option value="tochigi">Tochigi</option>
                    <option value="maebashi">Gunma</option>
                    <option value="ibaraki">Ibaragi</option>
                    <option value="saitama">Saitama</option>
                    <option value="tokyo">Tokyo</option>
                    <option value="kanagawa">Kanagawa</option>
                    <option value="chiba">Chiba</option>
                    <option value="yamanashi">Yamanashi</option>
                    <option value="nagano">Nagano</option>
                    <option value="shizuoka">Shizuoka</option>
                    <option value="toyama">Toyama</option>
                    <option value="ogaki">Gifu</option>
                    <option value="ishikawa">Ishikawa</option>
                    <option value="nagoya">Aichi</option>
                    <option value="echizen">Fukui</option>
                    <option value="kusatsu">Shiga</option>
                    <option value="tsu">Mie</option>
                    <option value="nara">Nara</option>
                    <option value="kyoto">Kyoto</option>
                    <option value="osaka">Osaska</option>
                    <option value="wakayama">Wakayama</option>
                    <option value="kobe">Hyogo</option>
                    <option value="okayama">Okayama</option>
                    <option value="tottori">Tottori</option>
                    <option value="hiroshima">Hiroshima</option>
                    <option value="matsue">Shimane</option>
                    <option value="yamaguchi">Yamaguchi</option>
                    <option value="takamatsu">Kagawa</option>
                    <option value="tokushima">Tokushima</option>
                    <option value="matsuyama">Ehime</option>
                    <option value="nankoku">Kochi</option>
                    <option value="kasuga">fukuoka</option>
                    <option value="beppu">Oita</option>
                    <option value="miyazaki">miyazaki</option>
                    <option value="saga">Saga</option>
                    <option value="nagasaki">Nagasaki</option>
                    <option value="kumamoto">Kumamoto</option>
                    <option value="kagoshima">Kagoshima</option>
                    <option value="naha-shi">okinawa</option>
                    <!-- <input type="submit" value="ここをキャンプ地とする"> -->
                </select>
            </form>
        </div>
        <div id="weather">

            <div class="tabs">
                <input id="tab-1" type="radio" name="tab-radio" checked>
                <label class="tab-label" for="tab-1">TODAY</label>

                <input id="tab-2" type="radio" name="tab-radio">
                <label class="tab-label" for="tab-2">TMR</label>

                <input id="tab-3" type="radio" name="tab-radio">
                <label class="tab-label" for="tab-3">DAT</label>

                <div class="tab-content tab-1-content">
                    <img src="img/weather/sun.png" alt="today">
                </div>
                <div class="tab-content tab-2-content">
                    <img src="img/weather/rain.png" alt="tomorrow">
                </div>
                <div class="tab-content tab-3-content">
                    <img src="img/weather/cloud.png" alt="dayaftertomorrow">
                </div>
                <div id="nowaddress"><p class="nowaddress">Your Location</p></div>


                <div class="tab-content tab-1-content">
                    <div class="dry_time">
                        DRY TIME
                    </div>
                    <div class="humidity">
                        HUMIDITY
                    </div>
                    <div class="max">
                        MAX<br />
                        TEMP
                    </div>
                    <div class="now">
                        NOW<br />
                        TEMP
                    </div>
                    <div class="min">
                        MIN<br />
                        TEMP
                    </div>
                    <div class="now_address"></div>
                </div>
                <div class="tab-content tab-2-content">
                    <div class="dry_time">
                        DRY TIME
                    </div>
                    <div class="humidity">
                        HUMIDITY
                    </div>
                    <div class="max">
                        MAX<br />
                        TEMP
                    </div>
                    <div class="now">
                        NOW<br />
                        TEMP
                    </div>
                    <div class="min">
                        MIN<br />
                        TEMP
                    </div>
                    <div class="now_address"></div>
                </div>
                <div class="tab-content tab-3-content">
                    <div class="dry_time">
                        DRY TIME
                    </div>
                    <div class="humidity">
                        HUMIDITY
                    </div>
                    <div class="max">
                        MAX<br />
                        TEMP
                    </div>
                    <div class="now">
                        NOW<br />
                        TEMP
                    </div>
                    <div class="min">
                        MIN<br />
                        TEMP
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script>
        var ken = '';
        $('[name=cityName]').change(function () {
            ken = $('[name=cityName] option:selected').val();
            console.log(`ken: ${ken}`);
            var txt = $('[name=cityName] option:selected').text();
            $('p').text(txt);

            $.ajax({
                url: `http://10.17.3.228:3001/${ken}`,
                // url:"http://192.168.0.5:3001/yokohama",
                type: "get",
                success: function (data) {
                    console.log(`data:${data}`);
                    console.log(data);

                    var humi = data.humidity;
                    var max2 = Math.floor(data.temp_max);
                    var main = Math.floor(data.main);
                    var min2 = Math.floor(data.temp_min);
                    var drytime = Math.floor(humi / main * 2);
                    $(document).ready(function () {
                        $(".humidity").html("Humidity " + humi + "%");
                        $(".max").html("Max" + "<br/>" +  max2 + "°");
                        $(".now").html("Now" + "<br/>" + main + "°");
                        $(".min").html("Min" + "<br/>" + min2 + "°");
                        $(".dry_time").html("DryTime " + drytime + " Hour");
                    });
                },
                error: function (err) {
                    console.error(err);
                }
            });
        });
    </script>

</body>

</html>